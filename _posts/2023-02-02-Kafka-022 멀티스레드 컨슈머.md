---
title: Kafka 멀티스레드 컨슈머
categories: Kafka
---

카프카는 처리량을 늘리기 위해 파티션과 컨슈머 갯수를 늘려서 운영할 수 있다. 파티션을 여러개로 운영하는 경우 데이터를 병렬처리하기 위해서 파티션 갯수와 컨슈머 갯수를 동일하게 맞추는 것이 가장 좋은 방법이다.

- 토픽의 파티션은 1개 이상으로 이루어져 있으며 1개의 파티션은 1개의 컨슈머가 할당되어 데이터를 처리할 수 있다.
- 파티션 갯수가 n개라면 동일 컨슈머 그룹으로 묶인 컨슈머 스레드를 최대 n개 운영할 수 있다.
- 그러므로 n개의 스레드를 가진 1개의 프로세스를 운영하거나 1개의 스레드를 가진 프로세스를 n개 운영하는 방법도 있다.

<aside>
📢 - 배포 자동화가 유연하지 못한 경우에는 스케일 아웃에 어려움이 있기 때문에 단일 프로세스에 여러 컨슈머 스레드로 운영할 수 있다. 하지만 이 경우 다른 컨슈머 스레드에 문제가 발생할 경우 전체 컨슈머에 이슈가 발생할 가능성이 있다.

- 배포 자동화가 잘 구성되어 있다면 단일 프로세스에 단일 컨슈머 스레드 방식으로 구성하는 것이 더 유연하다. 다른 컨슈머의 이슈에 영향을 받을 가능성이 적기 때문이다.

</aside>