---
title: Kafka ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ
categories: Kafka
---

# Gradle
    
    ```groovy
    dependencies {
    	compile 'org.apache.kafka:kafka-streams:2.5.0'
    }
    ```

---

## í•„í„°ë§ ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜

í† í”½ìœ¼ë¡œ ë“¤ì–´ì˜¨ ë¬¸ìì—´ ë°ì´í„° ì¤‘ ë¬¸ìì—´ì˜ ê¸¸ì´ê°€ 5ë³´ë‹¤ í° ê²½ìš°ë§Œ í•„í„°ë§ í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆë‹¤. 

ë©”ì„¸ì§€ í‚¤ ë˜ëŠ” ë©”ì„¸í‚¤ ê°’ì„ í•„í„°ë§í•˜ì—¬ íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ê³¨ë¼ë‚¼ ë•ŒëŠ” filter() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. filter() ë©”ì„œë“œëŠ” ìŠ¤íŠ¸ë¦¼ì¦ˆ DSL ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í•„í„°ë§ ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œì´ë‹¤.

![Untitled](/images/kafka/Untitled%209.png)

- code
    
    ```kotlin
    import org.apache.kafka.streams.StreamsBuilder
    import org.apache.kafka.streams.kstream.KStream
    
    class StreamFilter {
        private val APPLICATION_NAME = "streams-filter-application"
        private val BOOTSTRAP_SERVERS = "my-kafka:9092"
        private val STREAM_LOG = "stream_log"
        private val STREAM_LOG_FILTER = "stream_log_filter"
    
        fun streaming() {
            val builder = StreamsBuilder()
            val streamLog: KStream<String, String> = builder.stream(STREAM_LOG)
            streamLog
                .filter { _, value ->
                    value.length > 5
                }
                .to(STREAM_LOG_FILTER)
        }
    }
    
    fun main() {
        StreamFilter().streaming()
    }
    ```
    
- shell
    - í† í”½ ìƒì„±
        
        ```bash
        $ bin/kafka-topics.sh --bootstrap-server my-kafka:9092 --topic stream_log --create
        $ bin/kafka-topics.sh --bootstrap-server my-kafka:9092 --topic stream_log_filter --create
        ```
        
    - produce [stream_log]
        
        ```bash
        $ bin/kafka-console-producer.sh --bootstrap-server my-kafka:9092 --topic stream_log
        > 0
        > 01
        > 012
        > 0123
        > 01234
        > 012345 // stream filter í†µê³¼
        ```
        
    - consume [stream_log_filter]
        
        ```bash
        $ bin/kafka-console-consumer.sh --bootstrap-server my-kafka:9092 --topic stream_log_filter
        012345 // ë©”ì„¸ì§€ ì»¨ìŠ˜
        ```
        

<aside>
ğŸ‘ ìŠ¤íŠ¸ë¦¼ì¦ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•œ ì§§ì€ ì½”ë“œë¡œ ì‰½ê³  ë¹ ë¥´ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.
ì»¨ìŠˆë¨¸ì˜ í´ë§ ë“± ë‹¤ë¥¸ ìš”ì†Œë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ êµ‰ì¥íˆ ìœ ìš©í•˜ë‹¤.

</aside>